import"./main-bac5165b.js";import{a as o}from"./axios-54ed5feb.js";(async()=>{o.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";const n=document.querySelector(".js-city"),c=document.querySelector(".js-town"),d=document.querySelector(".js-area-text"),l=document.querySelectorAll(".dropdown-validation"),p=document.querySelectorAll(".dropdown-menu"),u=async()=>(await o.post("https://tdx.transportdata.tw/auth/realms/TDXConnect/protocol/openid-connect/token",{grant_type:"client_credentials",client_id:"sksak75312-53681308-78bc-403b",client_secret:"4df72a2d-14a9-4f79-87c8-55a002e1f028"})).data.access_token,r=await u();(async()=>{try{let t="";(await o.get("https://tdx.transportdata.tw/api/basic/v2/Basic/City?%24format=JSON",{headers:{Authorization:`Bearer ${r}`}})).data.forEach(e=>{t+=`<li><a class="dropdown-item" href="#" id= ${e.City}>${e.CityName}</a></li>`}),n.innerHTML=t}catch(t){console.log(t)}})();const f=t=>{t.preventDefault();const e=t.target.closest(".dropdown-validation"),a=e.querySelector(".dropdown-text"),i=e.querySelector(".js-city");if(typeof t.target.text=="string"){if(e.classList.add("is-valid"),e.classList.remove("is-invalid"),a.innerText=t.target.text,i){d.innerText="\u9078\u64C7\u5340\u57DF";let s="";o.get(`https://tdx.transportdata.tw/api/basic/v2/Basic/City/${t.target.id}/Town?%24format=JSON`,{headers:{Authorization:`Bearer ${r}`}}).then(y=>{y.data.forEach(m=>{s+=`<li><a class="dropdown-item" href="#">${m.TownName}</a></li>`}),c.innerHTML=s})}}else e.classList.add("is-invalid"),e.classList.remove("is-valid")};p.forEach(t=>{t.addEventListener("click",f)}),function(){var t=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(t).forEach(function(e){e.addEventListener("submit",function(a){e.checkValidity()||(a.preventDefault(),a.stopPropagation()),l.forEach(i=>{i.classList.contains("is-valid")===!1&&(a.preventDefault(),a.stopPropagation(),i.classList.add("is-invalid"))}),e.classList.add("was-validated")},!1)})}()})();
