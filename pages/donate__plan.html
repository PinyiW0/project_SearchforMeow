<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- AOS -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <!-- customer -->
  <title>donate plane</title>
  <link rel="short icon" href="../assets/images/logo-32.png">
  <meta name="description" content="搜趣找貓 search for meow">
  <meta name="keywords" content="搜趣找貓,search,meow,cat,adopt,shelter">
  <meta property="og:title" content="搜趣找貓 search for meow">
  <meta property="og:description" content="搜趣找貓 search for meow">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://pinyiw0.github.io/project_SearchforMeow/">
  <meta property="og:image" content="https://i.imgur.com/9lYfi0l.png">
  <link rel="apple-touch-icon" href="../assets/images/logo-32px.png">
</head>

<body>
  <%- include('./layout/header'); -%>
    <main class="position-relative donate__plan mt-7 mt-lg-13 l-donate-plan__bg py-16">
      <div class="container" id="app">
            <!-- <p class="mb-0 text-white fs-4 fs-md-2 font-SerifTC letterSpc-8 position-absolute top-50 left-0 ps-5 translate-middle-y">
              感謝您的支持<br class="">愛你唷！
            </p> -->
      </div>
    </main>
    <%- include('./layout/footer'); -%>
      <script type="module" src="../main.js"></script>
      <script src="https://kit.fontawesome.com/96a7520586.js" crossorigin="anonymous"></script>
      <!-- jQuery  -->
      <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
      <!-- AOS -->
      <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
      <!-- AOS init -->
      <script>
        AOS.init();
      </script>
      <!-- personal -->
      <script>
        const app = {
          data: {
            // (page:頁數,頁數*    *代表當頁必填)
            // 捐贈方案 (page:0*)
            donatePlan: "",
            // 捐款金額 (page:0*)
            donateValue: "0",
            // 捐款者姓名(page:1*,3*)
            donorName: "",
            // 捐款者性別(page:1*,3*)
            donorGender: "",
            // 捐款者身分證字號(page:1*,3*)
            donorPersonalID: "",
            // 捐款者電子郵件 (page:1*,3*)
            donorMail: "",
            // 捐款者聯絡電話(page:1*,3*)
            donorPhone: "",
            // 捐款者通訊地址-縣市--select/option(page:1)
            donorAddrCounty: "",
            // 捐款者通訊地址-鄉鎮區--select/option(page:1)
            donorAddrCity: "",
            // 捐款者通訊地址輸入欄位--input:text(page:1)
            donorAddr: "",
            // 是否需要收據radio group(page:2*,3*)
            // value 0:unset(應該不會有，會預設是1) 1:不需要收據 2:電子收據 3:紙本收據
            // value: 不需要收據:noReceipt
            // ****** 如果這個選項選擇了1,理論同頁面下方不需要填寫資料了******
            donorReceiptNeeded: "noReceipt",
            // 收據是否同捐款人資料(page:2,3)
            booleanSameAsDonorSwitchBtn: false,
            // 收據抬頭(page:2*,3*)
            donorTitle: "",
            // 報稅憑證(page:2*,3*)
            donorCertification: "",
            // 捐款徵信名稱(page:2,3)
            donorDonationName: "",
            // 現在步驟（讓method在調用表單驗證的資料的時候，可以渲染出正確頁數）
            nowStep: 0,
            // 儲存render用的縣市,不會經由任何function去更動
            citydata:{
              台北:["內湖","南港","木柵",],
              台中:["西屯","北屯","南屯","烏日","太平","東區",],
              高雄:["鼓山", "三民", "左營",]
            }
          },
          // 初始頁面（單次、定期捐款選單頁面）
          render0() {
            // 目前在第0步驟
            this.data.nowStep=0;
            // 預設一渲染的時候會是單次捐款
            this.data.donatePlan='once';
            const app = document.getElementById('app');
            // 頁面替換開始
            app.innerHTML = `
              <div class="donate__plan__form">
                <div class="row">
                  <div class="col-12 col-md-8 col-xl-5">
                    <div class="py-10 px-11 border border-2 border-inputBdr-dark l-bg-background-yellow">
                        <div class="list-group d-flex" role="tablist">
                          <a 
                            class="list-group-item list-group-item-action active w-50 text-center py-1 py-md-2 border border-inputBdr-dark d-flex align-items-center justify-content-center"
                            id="list-home-list" data-bs-toggle="list" href="#selectPlan_once" role="tab"
                            aria-controls="list-home" onclick="app.method.clearCheckValidation();app.method.clearCounts();app.data.donatePlan='once'">
                            <span class="me-1 me-md-3 fs-7 fs-md-6">單次捐款</span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="arrow">
                              <path d="M2.5 14H21.5L18.0623 9"  stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                          </a>
                          <a 
                            class="list-group-item list-group-item-action w-50 text-center py-1 py-md-2 border border-inputBdr-dark d-flex align-items-center justify-content-center" id="list-profile-list"
                            data-bs-toggle="list" href="#selectPlan_regular" role="tab" aria-controls="list-profile" onclick="app.method.clearCheckValidation();app.method.clearCounts();app.data.donatePlan='regular'">
                            <span class="me-1 me-md-3 fs-7 fs-md-6">每月定期捐款</span>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="arrow">
                              <path d="M2.5 14H21.5L18.0623 9"  stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                          </a>
                        </div>
                        <div class="tab-content pt-7">
                          <div class="tab-pane active" id="selectPlan_once" role="tabpanel">
                            <form class="needs-validation" novalidate>
                              <h3 class="fs-6 letterSpc-8 text-title">點選金額或自訂金額</h3>
                              <ul class="donate-list list-unstyled mb-0">
                                <li class="donate-list__item border-bottom border-inputBdr-light border-2" data-dollars="300">
                                  <a href="#" class="d-flex justify-content-between px-3 align-items-md-baseline align-items-center font-SansTC pt-6">
                                    <p class="mb-0 fw-bold flex-shrink-0 me-3 me-md-0">
                                      <span class="text-title fw-medium letterSpc-8">NTD</span> 
                                      <span class="text-primary fs-5 fs-md-2 letterSpc-8">300<span class="invisible">0</span></span>
                                    </p>
                                    <p class="mb-0 letterspc-8 text-text fw-medium">滿足貓貓們一週的貓砂</p>
                                  </a>
                                </li>
                                <li class="donate-list__item border-bottom border-inputBdr-light border-2" data-dollars="600">
                                  <a href="#" class="d-flex justify-content-between px-3 align-items-baseline font-SansTC pt-6">
                                    <p class="mb-0 fw-bold flex-shrink-0 me-3 me-md-0">
                                      <span class="text-title fw-medium letterSpc-8">NTD</span> 
                                      <span class="text-primary fs-5 fs-md-2 letterSpc-8">600</span>
                                    </p>
                                    <p class="mb-0 letterspc-8 text-text fw-medium">買一包貓糧給主子</p>
                                  </a>
                                </li>
                                <li class="donate-list__item border-bottom border-inputBdr-light border-2" data-dollars="1500">
                                  <a href="#" class="d-flex justify-content-between px-3 align-items-md-baseline align-items-center font-SansTC pt-6">
                                    <p class="mb-0 fw-bold flex-shrink-0 me-3 me-md-0">
                                      <span class="text-title fw-medium letterSpc-8">NTD</span> 
                                      <span class="text-primary fs-5 fs-md-2 letterSpc-8">1500</span>
                                    </p>
                                    <p class="mb-0 letterspc-8 text-text fw-medium">這個月可以平安度過了</p>
                                  </a>
                                </li>
                              </ul>
                              <div class="py-3 py-md-11 border-bottom border-2 border-inputBdr-light d-flex align-items-center px-3">
                                <label for="once_count" class="me-2 flex-shrink-0">自訂金額</label>
                                <input type="tel" name="counts" id="once_count" placeholder="請輸入" class="form-control flex-shrink-0 w-50"  data-dataname="donateValue" required onchange="app.method.bindInputAndData(this)" >
                                <div class="invalid-feedback">請輸入捐款金額</div>
                              </div>
                              <div class="mt-2 mt-lg-4">
                                <p class=mb-0>選擇付款方式</p>
                                <div class="form-check">
                                  <input class="form-check-input" type="radio" name="once_creditCard" id="once_creditCard"
                                    checked required>
                                  <label class="form-check-label" for="once_creditCard">信用卡</label>
                                </div>
                              </div>
                              <div class="mt-2 mt-lg-4">
                                <p class=mb-0>付款工具</p>
                                <div class="form-check">
                                  <input class="form-check-input" type="radio" name="once_usetopay" id="once_usetopay"
                                    checked required>
                                  <label class="form-check-label" for="once_usetopay">信用卡</label>
                                </div>
                              </div>
                              <div class="text-center mt-19">
                                <button class="btn btn-primary w-100 w-md-50" type="submit">下一步</button>
                              </div>
                            </form>
                          </div>

                          <div class="tab-pane" id="selectPlan_regular" role="tabpanel">
                            <form class="needs-validation" novalidate>
                              <h3 class="fs-6 letterSpc-8 text-title">點選金額或自訂金額</h3>
                              <ul class="donate-list list-unstyled mb-0">
                                <li class="donate-list__item border-bottom border-inputBdr-light border-2" data-dollars="300">
                                  <a href="#" class="d-flex justify-content-between px-3 align-items-center  align-items-md-baseline font-SansTC pt-6">
                                    <p class="mb-0 fw-bold flex-shrink-0">
                                      <span class="text-title fw-medium letterSpc-8">NTD</span> 
                                      <span class="text-primary fs-5 fs-md-2 letterSpc-8">300</span>
                                    </p>
                                    <p class="mb-0 letterspc-8 text-text fw-medium">每天只要10元</p>
                                  </a>
                                </li>
                                <li class="donate-list__item border-bottom border-inputBdr-light border-2" data-dollars="600">
                                  <a href="#" class="d-flex justify-content-between px-3 align-items-center align-items-md-baseline font-SansTC pt-6">
                                    <p class="mb-0 fw-bold flex-shrink-0">
                                      <span class="text-title fw-medium letterSpc-8">NTD</span> 
                                      <span class="text-primary fs-5 fs-md-2 letterSpc-8">600</span>
                                    </p>
                                    <p class="mb-0 letterspc-8 text-text fw-medium">每天不到20元</p>
                                  </a>
                                </li>
                                <li class="donate-list__item border-bottom border-inputBdr-light border-2" data-dollars="1500">
                                  <a href="#" class="d-flex justify-content-between px-3 align-items-center align-items-md-baseline font-SansTC pt-6">
                                    <p class="mb-0 fw-bold flex-shrink-0 me-3 me-md-0">
                                      <span class="text-title fw-medium letterSpc-8">NTD</span> 
                                      <span class="text-primary fs-5 fs-md-2 letterSpc-8">1500</span>
                                    </p>
                                    <p class="mb-0 letterspc-8 text-text fw-medium">每天只要1杯咖啡的錢</p>
                                  </a>
                                </li>
                              </ul>
                              <div class="py-3 py-md-11 border-bottom border-2 border-inputBdr-light d-flex align-items-center px-3">
                                <label for="regular_count" class="me-2 flex-shrink-0">自訂金額</label>
                                <input type="tel" name="counts" id="regular_count" placeholder="請輸入" value="" class="form-control flex-shrink-0 w-50" data-dataname="donateValue" required onchange="app.method.bindInputAndData(this)">
                                <div class="invalid-feedback">請輸入捐款金額</div>
                              </div>
                              <div class="mt-2 mt-lg-4">
                                <p class=mb-0>選擇付款方式</p>
                                <div class="form-check">
                                  <input class="form-check-input" type="radio" name="retular_creditCard" id="regular_creditCard"
                                    checked required>
                                  <label class="form-check-label" for="regular_creditCard">信用卡</label>
                                </div>
                              </div>
                              <div class="mt-2 mt-lg-4">
                                <p class=mb-0>付款工具</p>
                                <div class="form-check">
                                  <input class="form-check-input" type="radio" name="regular_usetopay" id="regular_usetopay"
                                    checked required>
                                  <label class="form-check-label" for="regular_usetopay">信用卡</label>
                                </div>
                              </div>
                              <div class="text-center mt-19">
                                <button class="btn btn-primary w-100 w-md-50" type="submit">下一步</button>
                              </div>
                            </form>
                          </div>
                        </div>
                    </div>
                  </div>
                </div>
              </div>
            `;
            // 頁面替換結束
            // 綁定目標頁面app(即#app)，讓裡面的表格可以與inputbox綁定
            this.method.bindTableAndInput();
            // 強制頁面內所有input:tel都只能輸入數字
            this.method.forceNumberInput();
            // 觸發BS validation樣式並且防止submit事件觸發,如果表單驗證通過則會渲染下一頁面
            this.method.checkValidation();
          },
          // 填寫捐款基本資料（姓名、性別、身分證字號、電子郵件、聯絡電話、通訊地址）
          render1() {
            // 進入這頁的預設值
            this.data.nowStep=1;
            this.data.donorGender="other"
            const app = document.getElementById('app');
            app.innerHTML=`
              <div class="donate__plan__form">
                <div class="row">
                  <div class="col-12 col-md-8 col-xl-5">
                    <div class="py-10 px-11 border border-2 border-inputBdr-dark l-bg-background-yellow">
                      <div class="border border-2 border-inputBdr-dark bg-primary text-center py-2 font-SansTC d-flex justify-content-center align-items-center mb-7">
                        <span class="text-white fs-6 me-3">${this.data.donatePlan=== "once" ? '單次捐贈' : this.data.donatePlan==="regular"?'定期捐贈':"test"}</span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="arrow">
                          <path d="M2.5 14H21.5L18.0623 9" stroke="#fff"  stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                      </div>
                      <form action="" class="needs-validation" novalidate>
                        <h2 class="mb-0 text-title fs-6 font-SansTC letterSpc-8 fw-medium mb-3 mb-md-6">填寫基本資料</h2>
                        <div class="d-flex align-items-center mb-4 mb-md-8">
                          <label for="donor_name" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">姓名</label>
                          <input type="text" class="form-control w-50" id="donor_name" placeholder="請輸入" required data-dataname="donorName" onchange="app.method.bindInputAndData(this);">
                          <div class="invalid-feedback">
                            <small class="d-none d-md-inline">輸入姓名</small>
                          </div>
                        </div>
                        <div class="mb-4 mb-md-8">
                          <span class="l-requiredIcon me-2">性別</span>
                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="myGender" id="radio_male" value="male" onclick="app.data.donorGender=this.value">
                            <label class="form-check-label" for="radio_male">男</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="myGender" id="radio_female" value="female" onclick="app.data.donorGender=this.value" >
                            <label class="form-check-label" for="radio_female">女</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="myGender" id="radio_others" value="others"onclick="app.data.donorGender=this.value"  checked>
                            <label class="form-check-label" for="radio_others">其他</label>
                          </div>
                        </div>
                        <div class="d-flex align-items-center justify-content-between position-relative mb-4 mb-md-8">
                          <label for="donor_personalID" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">身分證字號</label>
                          <input type="text" class="form-control" id="donor_personalID" placeholder="第一個字母請大寫" maxlength="10" pattern="[A-Z][12]\\d{8}"required data-dataname="donorPersonalID" onchange="app.method.bindInputAndData(this);">
                          <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                            <small class="d-none d-md-inline">請輸入身分證並符合格式</small>
                          </div>
                        </div>
                        <div class="d-flex align-items-center position-relative mb-4 mb-md-8">
                          <label for="donor_mail" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">電子郵件</label>
                          <input type="email" class="form-control" id="donor_mail" placeholder="請輸入" pattern="([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+)\\.[a-zA-Z]{2,}" required data-dataname="donorMail" onchange="app.method.bindInputAndData(this);">
                          <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                            <small class="d-none d-md-inline">請輸入正確的電子郵件</small>
                          </div>
                        </div>
                        <div class="d-flex align-items-center position-relative mb-4 mb-md-8">
                          <label for="donor_phone" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">聯絡電話</label>
                          <input type="tel" class="form-control" id="donor_phone" placeholder="09xxxxxxxx" pattern="09\\d{8}" maxlength="10" required data-dataname="donorPhone" onchange="app.method.bindInputAndData(this);">
                          <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                            <small class="d-none d-md-inline">請輸入正確的聯絡電話</small>
                          </div>
                        </div>
                        <div class="d-flex align-items-center mb-1 mb-md-2">
                          <label for="donor_addr" class="form-label flex-shrink-0 me-3">通訊地址</label>
                          <select class="form-select county" aria-label="選擇縣市">
                            <option selected>縣市</option>
                            <option value="台北">台北</option>
                            <option value="台中">台中</option>
                            <option value="高雄">高雄</option>
                          </select>
                          <select class="form-select city" aria-label="選擇鄉鎮區">
                            <option selected>鄉鎮區</option>
                          </select>
                        </div>
                        <input type="text" class="form-control" id="$donor_addr" data-dataname="donorAddr" onchange="app.method.bindInputAndData(this);">
                        <div id="donor_help" class="form-text text-primary mb-17">
                          若需要紙本收據請填寫、末填則奇送電子收據，謝謝！
                        </div>
                        <div class="d-flex flex-wrap flex-md-nowrap btns-gap">
                          <a href="#" class="btn border-0 bg-secondary previous w-100 order-1 order-md-0">上一步</a>
                          <a href="#" class="btn border-0 bg-primary next w-100 mb-3 mb-md-0">下一步</a>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            `
            // 觸發BS validation樣式並且防止submit事件觸發,如果表單驗證通過則會渲染下一頁面
            // 內涵newxtPageRender函數
            this.method.nextPageValidation();
            // 前一頁，因為並不需要驗證資料所以直接執行function即可。，一樣是內涵previousPageRender函數
            this.method.previousPageWithoutValidation();
            // 綁定這頁的select,根據選擇的縣市動態改變鄉鎮區的選項
            this.method.dynamicChangeCity();
            // 綁定事件，每次select只要有選擇(change),就會寫回data中
            this.method.writeAddrData();
          },
          // 是某需要收據？ 收據抬頭、報稅憑證、捐款徵信名稱
          render2() {
            this.data.nowStep=2;
            // 設定進入頁面的時候預設是不需要收據的
            this.data.donorReceiptNeeded="noReceipt";
            const app = document.getElementById('app');
            app.innerHTML=`
              <div class="donate__plan__form">
                <div class="row">
                  <div class="col-12 col-md-8 col-xl-6">
                    <div class="py-10 px-11 border border-2 border-inputBdr-dark l-bg-background-yellow">
                      <div class="border border-2 border-inputBdr-dark bg-primary text-center py-2 font-SansTC d-flex justify-content-center align-items-center mb-7">
                        <span class="text-white fs-6 me-3">${this.data.donatePlan=== "once" ? '單次捐贈' : this.data.donatePlan==="regular"?'定期捐贈':"test"}</span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="arrow">
                          <path d="M2.5 14H21.5L18.0623 9" stroke="#fff"  stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                      </div>
                      <form action="" class="needs-validation" novalidate>
                        <h2 class="mb-0 text-title fs-6 font-SansTC letterSpc-8 fw-medium mb-3 mb-md-6">收費資訊與寄送地址</h2>
                        <p class="mb-0 ">是否需要收據</p>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="receipt" id="noReceipt" value="noReceipt" onclick="app.data.donorReceiptNeeded=this.value" ${this.data.donorReceiptNeeded==="noReceipt"?"checked":""}>
                          <label class="form-check-label" for="noReceipt">不需要，無抵稅需求</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="receipt" id="digitalReceipt" value="digitalReceipt" onclick="app.data.donorReceiptNeeded=this.value" ${this.data.donorReceiptNeeded==="digitalReceipt"?"checked":""}>
                          <label class="form-check-label" for="digitalReceipt">電子收據（響應環保）</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="receipt" id="paperReceipt" value="paperReceipt" onclick="app.data.donorReceiptNeeded=this.value" ${this.data.donorReceiptNeeded==="paperReceipt"?"checked":""} ${this.data.donorAddr===""||this.data.donorAddrCity===""||this.data.donorAddrCounty===""?"disabled":""}>
                          <label class="form-check-label" for="paperReceipt">紙本收據，需提供完整地址</label>
                        </div>
                        <div class="form-check form-switch mt-4 mt-md-8">
                          <input class="form-check-input rounded-pill" type="checkbox" role="switch" id="sameAsDonor">
                          <label class="form-check-label" for="sameAsDonor">同捐款人資料</label>
                        </div>
                        <div class="d-flex align-items-center justify-content-between position-relative mb-4 mb-md-8">
                          <label for="donor_title" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">收據抬頭</label>
                          <input type="text" class="form-control" id="donor_title" placeholder="請輸入姓名" data-dataname="donorTitle" onchange="app.method.bindInputAndData(this);" required>
                          <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                            <small class="d-none d-md-inline">請輸入收據抬頭</small>
                          </div>
                        </div>
                        <div class="d-flex align-items-center justify-content-between position-relative mb-4 mb-md-8">
                          <label for="donor_certification" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">報稅憑證</label>
                          <input type="text" class="form-control" id="donor_certification" placeholder="身分證字號，第一個字母請大寫" data-dataname="donorCertification" onchange="app.method.bindInputAndData(this);" required>
                          <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                            <small class="d-none d-md-inline">請輸入正確的報稅憑證</small>
                          </div>
                        </div>
                        <div class="d-flex align-items-center justify-content-between position-relative mb-17">
                          <label for="donor_donationName" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">捐款徵信名稱</label>
                          <input type="text" class="form-control" id="donor_donationName" placeholder="請輸入名稱" data-dataname="donorDonationName" onchange="app.method.bindInputAndData(this);" required>
                          <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                            <small class="d-none d-md-inline">請輸入捐款徵信名稱</small>
                          </div>
                        </div>
                        <div class="d-flex flex-wrap flex-md-nowrap btns-gap">
                          <a href="#" class="btn border-0 bg-secondary previous w-100 order-1 order-md-0">上一步</a>
                          <a href="#" class="btn border-0 bg-primary next w-100 mb-3 mb-md-0">下一步</a>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              <div>
            `
            // 綁定是否可以選擇需要紙本收據radio
            // this.method.dynamicChangeAddrDisableOrNot();
            // 綁定同捐款者資料switch
            this.method.switchSameAsDonorClickEvent();
            // 下一頁（需要驗證）
            this.method.previousPageWithoutValidation();
            // 上一頁（不需要驗證）
            this.method.nextPageValidation();
          },
          // 確認捐款資訊，顯示贊助方案及金額、捐款基本資料（帶入render1,render2頁面填寫的內容）
          render3() {
            this.data.nowStep=3;
            const app = document.getElementById('app');
            app.innerHTML=`
              <div class="donate__plan__form">
                <div class="row">
                  <div class="col-12">
                    <div class="py-10 px-11 border border-2 border-inputBdr-dark l-bg-background-yellow">
                      <form>
                        <div class="row">
                          <div class="col-12 col-md-6">
                            <div class="py-4 px-6 py-md-8 px-md-9 bg-secondary d-flex flex-column d-md-inline-block border border-2 border-primary mb-4 mb-md-8">
                              <p class="mb-0 font-SansTC fs-5 fw-bold mb-3">您的贊助方案</p>
                              <div class="d-flex align-items-end justify-content-between justify-content-md-start font-SansTC">
                                <div class="py-3 bg-primary text-white px-4 px-md-6 border border-2 border-inputBdr-dark me-5">${this.data.donatePlan==="once"?"單次捐款":"定期捐款"}</div>
                                <div class="">NTD<span class="text-primary fs-5 fs-xl-2">${this.data.donateValue}</span></div>
                              </div>
                            </div>
                            <h2 class="mb-0 text-title fs-6 font-SansTC letterSpc-8 fw-medium mb-3 mb-md-6">確認資料</h2>
                            <div class="d-flex align-items-center mb-4 mb-md-8">
                              <label for="donor_name" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">姓名</label>
                              <input type="text" class="form-control w-50" id="donor_name" value="${this.data.donorName}" placeholder="請輸入" required data-dataname="donorName" onchange="app.method.bindInputAndData(this);">
                              <div class="invalid-feedback">
                                <small class="d-none d-md-inline">輸入姓名</small>
                              </div>
                            </div>
                            <div class="mb-4 mb-md-8">
                              <span class="l-requiredIcon me-2">性別</span>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="myGender" id="radio_male" value="male" onclick="app.data.donorGender=this.value" ${this.data.donorGender==="male"?"checked":""}>
                                <label class="form-check-label" for="radio_male">男</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="myGender" id="radio_female" value="female" onclick="app.data.donorGender=this.value" ${this.data.donorGender==="female"?"checked":""}>
                                <label class="form-check-label" for="radio_female">女</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="myGender" id="radio_others" value="others"onclick="app.data.donorGender=this.value"  ${this.data.donorGender==="others"?"checked":""}>
                                <label class="form-check-label" for="radio_others">其他</label>
                              </div>
                            </div>
                            <div class="d-flex align-items-center justify-content-between position-relative mb-4 mb-md-8">
                              <label for="donor_personalID" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">身分證字號</label>
                              <input type="text" class="form-control" id="donor_personalID" placeholder="第一個字母請大寫" pattern="[A-Z][12]\\d{8}"required data-dataname="donorPersonalID" onchange="app.method.bindInputAndData(this);" value="${this.data.donorPersonalID?this.data.donorPersonalID:""}">
                              <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                                <small class="d-none d-md-inline">請輸入身分證並符合格式</small>
                              </div>
                            </div>
                            <div class="d-flex align-items-center position-relative mb-4 mb-md-8">
                              <label for="donor_mail" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">電子郵件</label>
                              <input type="email" class="form-control" id="donor_mail" placeholder="請輸入" pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$" required data-dataname="donorMail" onchange="app.method.bindInputAndData(this);" value="${this.data.donorMail?this.data.donorMail:""}">
                              <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                                <small class="d-none d-md-inline">請輸入正確的電子郵件</small>
                              </div>
                            </div>
                            <div class="d-flex align-items-center position-relative mb-4 mb-md-8">
                              <label for="donor_phone" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">聯絡電話</label>
                              <input type="tel" class="form-control" id="donor_phone" placeholder="09xxxxxxxx" pattern="09\\d{8}" required data-dataname="donorPhone" onchange="app.method.bindInputAndData(this);" value="${this.data.donorPhone?this.data.donorPhone:""}">
                              <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                                <small class="d-none d-md-inline">請輸入正確的聯絡電話</small>
                              </div>
                            </div>
                            <div class="d-flex align-items-center mb-1 mb-md-2">
                              <label for="donor_addr" class="form-label flex-shrink-0 me-3">通訊地址</label>
                              <select class="form-select county" aria-label="選擇縣市">
                                <option selected>縣市</option>
                                <option value="台北">台北</option>
                                <option value="台中">台中</option>
                                <option value="高雄">高雄</option>
                              </select>
                              <select class="form-select city" aria-label="選擇鄉鎮區">
                                <option selected>鄉鎮區</option>
                              </select>
                            </div>
                            <input type="text" class="form-control" id="$donor_addr" data-dataname="donorAddr" onchange="app.method.bindInputAndData(this);">
                            <div id="donor_help" class="form-text text-primary mb-4">
                              若需要紙本收據請填寫、末填則奇送電子收據，謝謝！
                            </div>
                          </div>



                          <div class="col-12 col-md-6">
                            <div class="d-flex flex-column justify-content-between h-100">
                              <div>
                                <p class="mb-0">是否需要收據</p>
                                <div class="form-check">
                                  <input class="form-check-input" type="radio" name="receipt" id="noReceipt" value="noReceipt" onclick="app.data.donorReceiptNeeded=this.value" ${this.data.donorReceiptNeeded==="noReceipt"?"checked":""}>
                                  <label class="form-check-label" for="noReceipt">不需要，無抵稅需求</label>
                                </div>
                                <div class="form-check">
                                  <input class="form-check-input" type="radio" name="receipt" id="digitalReceipt" value="digitalReceipt" onclick="app.data.donorReceiptNeeded=this.value" ${this.data.donorReceiptNeeded==="digitalReceipt"?"checked":""}>
                                  <label class="form-check-label" for="digitalReceipt">電子收據（響應環保）</label>
                                </div>
                                <div class="form-check">
                                  <input class="form-check-input" type="radio" name="receipt" id="paperReceipt" value="paperReceipt" onclick="app.data.donorReceiptNeeded=this.value" ${this.data.donorReceiptNeeded==="paperReceipt"?"checked":""} ${this.data.donorAddr===""||this.data.donorAddrCity===""||this.data.donorAddrCounty===""?"disabled":""}>
                                  <label class="form-check-label" for="paperReceipt">紙本收據，需提供完整地址</label>
                                </div>
                                <div class="form-check form-switch mt-4 mt-md-8">
                                  <input class="form-check-input rounded-pill" type="checkbox" role="switch" id="sameAsDonor">
                                  <label class="form-check-label" for="sameAsDonor">同捐款人資料</label>
                                </div>
                                <div class="d-flex align-items-center justify-content-between position-relative mb-4 mb-md-8">
                                  <label for="donor_title" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">收據抬頭</label>
                                  <input type="text" class="form-control" id="donor_title" placeholder="請輸入姓名" data-dataname="donorTitle" onchange="app.method.bindInputAndData(this);" required value="${this.data.donorTitle?this.data.donorTitle:""}">
                                  <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                                    <small class="d-none d-md-inline">請輸入收據抬頭</small>
                                  </div>
                                </div>
                                <div class="d-flex align-items-center justify-content-between position-relative mb-4 mb-md-8">
                                  <label for="donor_certification" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">報稅憑證</label>
                                  <input type="text" class="form-control" id="donor_certification" placeholder="身分證字號，第一個字母請大寫" data-dataname="donorCertification" onchange="app.method.bindInputAndData(this);" required value=${this.data.donorCertification?this.data.donorCertification:""}>
                                  <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                                    <small class="d-none d-md-inline">請輸入正確的報稅憑證</small>
                                  </div>
                                </div>
                                <div class="d-flex align-items-center justify-content-between position-relative mb-17">
                                  <label for="donor_donationName" class="form-label l-requiredIcon flex-shrink-0 me-3 mb-0">捐款徵信名稱</label>
                                  <input type="text" class="form-control" id="donor_donationName" placeholder="請輸入名稱" data-dataname="donorDonationName" onchange="app.method.bindInputAndData(this);" required value="${this.data.donorDonationName?this.data.donorDonationName:""}">
                                  <div class="invalid-feedback position-absolute top-100 translate-middle-y mt-2">
                                    <small class="d-none d-md-inline">請輸入捐款徵信名稱</small>
                                  </div>
                                </div>
                              </div>
                              <div class="d-flex flex-wrap flex-md-nowrap btns-gap">
                                <a href="#" class="btn border-0 bg-secondary previous w-100 order-1 order-md-0">上一步</a>
                                <a href="#" class="btn border-0 bg-primary next w-100 mb-3 mb-md-0">下一步</a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              `
              this.method.forceNumberInput();
              this.method.nextPageValidation();
              this.method.previousPageWithoutValidation();
              this.method.writeAddrData();
          },
          // 輸入信用卡資料 （信用卡卡號、有效期限、安全碼），填寫持卡人資料（持卡人姓名、手機號碼、電子信箱）
          render4() {
            this.data.nowStep=4;
            const app = document.getElementById('app');
            app.innerHTML=`
              <div class="donate__plan__form">
                <div class="row">
                  <div class="col-12">
                    <form class="needs-validation" novalidate>
                      <div class="py-10 px-11 border border-2 border-inputBdr-dark l-bg-background-yellow">
                        <div class="py-4 px-6 py-md-8 px-md-9 bg-secondary d-flex flex-column d-md-inline-block border border-2 border-primary mb-4 mb-md-8">
                          <p class="mb-0 font-SansTC fs-5 fw-bold mb-3">您的贊助方案</p>
                          <div class="d-flex align-items-end justify-content-between justify-content-md-start font-SansTC">
                            <div class="py-3 bg-primary text-white px-4 px-md-6 border border-2 border-inputBdr-dark me-5">${this.data.donatePlan==="once"?"單次捐款":"定期捐款"}</div>
                            <div class="">NTD<span class="text-primary fs-5 fs-xl-2">${this.data.donateValue}</span></div>
                          </div>
                        </div>
                        <h2 class="mb-0 lh-base fs-6">信用卡交易資訊</h2>
                        <table class="table align-middle table-borderless">
                          <thead>
                          </thead>
                          <tbody>
                            <tr>
                              <th scope="row" class="ps-0">
                                <label for="donor_credit_number"
                                  class="form-label l-requiredIcon flex-shrink-0 mb-0 me-2 l-text-nowrap">信用卡號</label>
                              </th>
                              <td colspan="4">
                                <input type="tel" class="form-control" id="donor_credit_number" placeholder="請輸入" required>
                              </td>
                            </tr>
                            <tr>
                              <th scope="row" class="ps-0">
                                <label for="donor_credit_duedate_MM"
                                  class="form-label l-requiredIcon flex-shrink-0 mb-0 me-2 l-text-nowrap">有效期限</label>
                              </th>
                              <td>
                                <div class="d-flex align-items-center">
                                  <input type="tel" class="form-control" id="donor_credit_duedate_MM" placeholder="MM"
                                    maxlength="2" required>
                                  <span class="px-3">-</span>
                                  <input type="tel" class="form-control" id="donor_credit_duedate_YY" placeholder="YY"
                                    maxlength="2" required>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <th scope="row" class="ps-0">
                                <label for="donor_credit_security"
                                  class="form-label l-requiredIcon flex-shrink-0 mb-0 me-2 l-text-nowrap">安全碼</label>
                                </th>
                                <td>
                                  <div class="d-flex align-items-center w-100 w-md-25">
                                    <input type="tel" class="form-control me-5" maxlength="3"
                                    id="donor_credit_security" placeholder="請輸入" required>
                                    <i class="fa-regular fa-credit-card text-primary"></i>
                                  </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <h2 class="mb-0 fs-base fs-6">持卡人資料</h2>
                        <div class="form-check form-switch">
                          <input class="form-check-input rounded-pill l-novalidate" type="checkbox" role="switch" id="donor_credit_remember">
                          <label class="form-check-label" for="donor_credit_remember">記住本次捐款人資訊</label>
                        </div>
                        
                        <table class="table align-middle table-borderless">
                          <thead>
                          </thead>
                          <tbody>
                            <tr>
                              <th scope="row" class="ps-0">
                                <label for="donor_credit_cardOwnerName"
                                  class="form-label l-requiredIcon flex-shrink-0 mb-0 me-2 l-text-nowrap">持卡人姓名</label>
                              </th>
                              <td colspan="4">
                                <input type="text" class="form-control" id="donor_credit_cardOwnerName" placeholder="請輸入" required>
                              </td>
                            </tr>
                            <tr>
                              <th scope="row" class="ps-0">
                                <label for="donor_credit_cardOwnerPhone"
                                  class="form-label l-requiredIcon flex-shrink-0 mb-0 me-2 l-text-nowrap">手機號碼</label>
                              </th>
                              <td>
                                <div class="d-flex align-items-center">
                                  <input type="tel" class="form-control" id="donor_credit_cardOwnerPhone" placeholder="請輸入09開頭"
                                    maxlength="10" required>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <th scope="row" class="ps-0">
                                <label for="donor_credit_cardOwnerMail"
                                  class="form-label l-requiredIcon flex-shrink-0 mb-0 me-2 l-text-nowrap">電子信箱</label>
                              </th>
                              <td>
                                <div class="d-flex align-items-center">
                                  <input type="email" class="form-control" id="donor_credit_cardOwnerMail" placeholder="如欲接收此筆交易付款通知，請輸入" required>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <p>注意事項：為維護交易安全，本公司己配合國際組織全面採用信用卡30S 2.0交易授權機制，如遇交易失敗，請洽詢發卡銀行或更換銀行卡片後重新交易。</p>
                        <div class="d-flex justify-content-center">
                          <a href="#" class="btn btn-primary w-100 w-lg-75 next">下一步</a>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            `
            // 這邊要注意順序，替換掉數字要在設定信用卡號以前，否則在信用卡判斷位數上加上"-"符號的時候可能會有問題
            this.method.forceNumberInput();
            this.method.setCreditNumberPattern();
            this.method.nextPageValidation();
          },
          // final page ，感謝讚註！！
          render5() {
            this.data.nowStep=5;
            const main= document.querySelector('main');
            main.classList.remove('l-donate-plan__bg');
            main.classList.add('l-donate-plan__bg-1');
            const app = document.getElementById('app');
            app.innerHTML=`
            <div class="mb-0 text-white fs-4 fs-md-2 letterSpc-8 position-absolute top-50 left-0 translate-middle-y">
              <p class="mb-0 font-SerifTC fw-bold" data-aos="zoom-in"  data-aos-duration="2000">感謝您的支持<br>愛你唷！</p>
              <svg xmlns="http://www.w3.org/2000/svg" width="79" height="85" viewBox="0 0 79 85" fill="none" class="position-absolute l-pos--custom__101" data-aos="zoom-in"  data-aos-delay="500"  data-aos-duration="2000">
                <g filter="url(#filter0_d_1321_2206)">
                  <path d="M42.4238 31.4217C42.4238 31.4217 28.948 9.15085 14.4182 18.5906C-0.111492 28.0304 9.85623 50.6259 32.1436 62.2145C54.431 73.803 59.1478 73.5126 59.1478 73.5126C59.1478 73.5126 62.0231 75.3292 62.5127 68.6257C63.0022 61.9222 69.1981 47.6311 70.6465 37.2738C72.0949 26.9166 73.3519 6.15976 60.728 3.52331C60.728 3.52331 42.9112 -1.02873 42.4238 31.4217Z" fill="#FA0032"/>
                </g>
                <defs>
                  <filter id="filter0_d_1321_2206" x="0.597656" y="0.304688" width="77.9336" height="84.4326" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                    <feOffset dy="4"/>
                    <feGaussianBlur stdDeviation="3.5"/>
                    <feComposite in2="hardAlpha" operator="out"/>
                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>
                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1321_2206"/>
                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1321_2206" result="shape"/>
                  </filter>
                </defs>
              </svg>


              <svg xmlns="http://www.w3.org/2000/svg" width="51" height="54" viewBox="0 0 51 54" fill="none" class="position-absolute l-pos--custom__102" data-aos="zoom-in"  data-aos-delay="1000"  data-aos-duration="2000">
                <g filter="url(#filter0_d_1321_2208)">
                  <path d="M23.37 19.7692C23.37 19.7692 31.9241 7.72199 39.7569 13.6696C47.5897 19.6172 41.008 31.994 27.9097 37.6279C14.8115 43.2618 12.1534 42.9013 12.1534 42.9013C12.1534 42.9013 10.4502 43.8102 10.4517 39.9951C10.4532 36.18 7.5397 27.8324 7.15022 21.9091C6.76075 15.9858 6.91182 4.18333 14.1677 3.21552C14.1677 3.21552 24.4428 1.37912 23.37 19.7692Z" fill="#FA0032"/>
                </g>
                <defs>
                  <filter id="filter0_d_1321_2208" x="0.03125" y="0.165039" width="50.0977" height="53.8311" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                    <feOffset dy="4"/>
                    <feGaussianBlur stdDeviation="3.5"/>
                    <feComposite in2="hardAlpha" operator="out"/>
                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>
                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1321_2208"/>
                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1321_2208" result="shape"/>
                  </filter>
                </defs>
              </svg>

            </div>

            `;

            AOS.init();
          },
          method: {
            // page0使用,讓點選的時候可以更新自訂金額的欄位
            bindTableAndInput() {
              const target = document.getElementById('app');
              target.querySelectorAll('#selectPlan_once .donate-list__item').forEach(item => {
                item.addEventListener('click', function (e) {
                  e.preventDefault();
                  const inputvalue = document.querySelector('#once_count');
                  // 顯示在畫面上
                  inputvalue.value = this.dataset.dollars;
                  // 將值存回
                  app.data.donateValue = inputvalue.value;
                })
              });
              target.querySelectorAll('#selectPlan_regular .donate-list__item').forEach(item => {
                item.addEventListener('click', function (e) {
                  e.preventDefault();
                  const inputvalue = document.querySelector('#regular_count');
                  inputvalue.value = this.dataset.dollars;
                  app.data.donateValue =inputvalue.value;
                })
              });
            },
            // 強制替換該頁面所有input:tel所輸入的非數字，將非數字替換成空字串''
            forceNumberInput() {
              const inputElements = document.querySelectorAll('input[type="tel"]');
              inputElements.forEach((item) => {
                item.addEventListener('input', function () {
                  const inputValue = this.value;
                  const numericValue = inputValue.replace(/\D/g, '');
                  if (inputValue !== numericValue) {
                    this.value = numericValue;
                    console.log('已經完成替換')
                  }
                })
              })
            },
            // page0用而已，因為只有這頁會分成兩個form，需要個別抓取
            // 表單要送出前，需要先看看是否有哪些欄位還沒有填寫
            checkValidation() {
              // 抓取該頁面所有dom元素包含needs-validation class
              const form = document.querySelectorAll('.needs-validation');
              form.forEach((item) => {
                // 對每個元素綁定submit事件
                item.addEventListener('submit', (e) => {
                  // 取消預設提交表單行為
                  e.preventDefault();
                  if (item.checkValidity()) {
                    app.method.nextPageRender();
                  } else {
                    // 表单验证不通过，显示验证错误
                    item.classList.add('was-validated');
                  }
                });
              })
              // document.querySelectorAll('.needs-validation').forEach((item) => {
              //   item.addEventListener('submit', (e) => {
              //     e.preventDefault();
              //     item.classList.add('was-validated');
              //   })
              // })
            },
            // page0使用，當點選不同的plan的時候，要清除驗證提示
            // 清除表單驗證的顯示提示
            clearCheckValidation() {
              document.querySelectorAll('.was-validated').forEach((item) => {
                item.classList.remove('was-validated');
              })
            },
            // page0:清除page0的兩個inputbox,並且將data內的值給清空
            clearCounts() {
              document.getElementById('once_count').value = '';
              document.getElementById('regular_count').value = '';
              console.log('clear counts');
              app.data.donateValue = 0;
            },
            // 不會直接由method呼叫，會由ajax生成的dom元素綁定onchange,去觸發這個函數並且將觸發事件的dom元素帶到inputbox這個變數中
            bindInputAndData(inputbox) {
              // 不可以使用oninput去綁定，會導致替換掉數字的函數，還來不及將非數字替換成空字串，就將值給存入donateValue中，導致donateValue會有非數字存在。
              const dataName = inputbox.dataset.dataname;
              app.data[dataName] = inputbox.value;
              console.log(`app.data.${dataName}的值是${app.data[dataName]}`);
            },
            // 不會直接使用，會由其他函數呼叫
            nextPageRender(){
              if(app.data.nowStep===5){
                return;
              }
              const page=app.data.nowStep+1;
              app.method.RenderSelector(page);
            },
            // 不會直接使用，會由其他函數呼叫
            previousPageRender(){
              if(app.data.nowStep===0){return;}
              const page=app.data.nowStep-1;
              app.method.RenderSelector(page);
            },
            // 不會直接使用，會由其他函數呼叫
            RenderSelector(pageNum=0){
              switch (pageNum){
                case 0:
                  app.render0();
                  break;
                case 1:
                  app.render1();
                  break;
                case 2:
                  app.render2();
                  break;
                case 3:
                  app.render3();
                  break;
                case 4:
                  app.render4();
                  break;
                case 5:
                  app.render5();
                  break;
                default:
                  alert('error');
              }
            },
            // 除了page0以外皆可使用
            nextPageValidation(){
              btn=document.querySelector('a.btn.next');
              form=document.querySelector('form');
              // 按下下一步按鈕之後，綁定表單送出事件的判斷
              btn.addEventListener('click',(e)=>{
                e.preventDefault();
                if(form.checkValidity()){
                  this.nextPageRender();
                }else{
                  form.classList.add('was-validated');
                }
              })
            },
            // 除了page0以外皆可使用
            previousPageWithoutValidation(){
              // 資料的儲存都直接綁定在物件的change或是onclick事件之上
              // 所以不需要額外處理資料，直接根據目前data內有的數值渲染前一頁即可
              btn=document.querySelector('a.btn.previous');
              btn.addEventListener('click',()=>{
                this.previousPageRender();
              })
            },
            dynamicChangeCity(){
            const selectCounty=document.querySelector('select.county');
            const selectCity=document.querySelector('select.city');
            console.log(selectCounty,selectCity);
            selectCounty.addEventListener('change',(e)=>{
              // 先取出目前選擇的縣市value是什麼
              const selectCityValue=e.target.value;
              // 清空鄉鎮區
              selectCity.innerHTML=`
              <option selected>鄉鎮區</option>
              `;
              // **要注意**
              // 一定要讓county的value match到app.data.citydata的key
              let optionsHTML = "";
              optionsHTML=app.data.citydata[selectCityValue].map(item=>`<option value="${item}">${item}</option>`).join('');
              selectCity.innerHTML+=optionsHTML;
            });
            },
            // 有填寫地址的頁面需要使用，用事件去觸發
            writeAddrData() {
              const selectCounty = document.querySelector('select.county');
              const selectCity = document.querySelector('select.city');
              selectCounty.addEventListener('change',(e)=>{
                console.log('county值存入data');
                app.data.donorAddrCounty=e.target.value;
              });
              selectCity.addEventListener('change',(e)=>{
                console.log('city值存入data');
                app.data.donorAddrCity=e.target.value;
              });
            },
            switchSameAsDonorClickEvent(){
              switchBtn=document.getElementById('sameAsDonor');
              switchBtn.addEventListener('click',()=>{
                const inputDonorTitle=document.getElementById('donor_title');
                const inputDonorCertification=document.getElementById('donor_certification');
                const inputDonorDonationName=document.getElementById('donor_donationName');
                if(switchBtn.checked){
                  // 將收據抬頭value修改為資料庫中的捐款者姓名
                  inputDonorTitle.value=app.data.donorName;
                  app.data.donorTitle=app.data.donorName;
                  // 將報稅憑證value修改為資料庫中的捐款者身分證字號
                  inputDonorCertification.value=app.data.donorPersonalID;
                  app.data.donorCertification=app.data.donorPersonalID;
                  // 將捐款徵信名稱value修改為資料庫中的捐款者姓名
                  inputDonorDonationName.value=app.data.donorName;
                  app.data.donorDonationName=app.data.donorName;
                }else{
                  inputDonorTitle.value="";
                  app.data.donorTitle="";
                  inputDonorCertification.value="";
                  app.data.donorCertification="";
                  inputDonorDonationName.value=""
                  app.data.donorDonationName=""
                }
              })
            },
            setCreditNumberPattern(){
              const inputBox=document.getElementById('donor_credit_number');
              inputBox.addEventListener('input',(e)=>{
                console.log(e.target.value);
                let digitsOnly=e.target.value.replace(/-/g,'');
                if (digitsOnly.length>16){
                  digitsOnly=digitsOnly.slice(0,16);
                }
                let formattedValue = '';
                for (let i = 0; i < digitsOnly.length; i++) {
                  if (i > 0 && i % 4 === 0) {
                    formattedValue += '-';
                  }
                  formattedValue += digitsOnly[i];
                }
                e.target.value=formattedValue;
              })
            }
          }
        }
        app.render0();
      </script>
</body>

</html>